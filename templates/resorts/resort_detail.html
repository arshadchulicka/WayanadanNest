{% extends 'base.html' %}

{% block content %}
<div class="container my-5">

    <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
        <div class="row g-0">

            <!-- Resort Image -->
            <div class="col-lg-6">
                <img src="{{ resort.image.url }}"
                     class="img-fluid h-100 w-100 object-fit-cover">
            </div>

            <!-- Resort Details -->
            <div class="col-lg-6 p-4 p-md-5">

                <span class="badge bg-success mb-2">Premium Resort</span>

                <h2 class="fw-bold mb-1">{{ resort.name }}</h2>
                <p class="text-muted mb-3">
                    <i class="fa-solid fa-location-dot me-1 text-success"></i>
                    {{ resort.location }}
                </p>

                <p class="text-secondary">{{ resort.description }}</p>

                <!-- Price -->
                <div class="my-4">
                    <span class="text-muted text-decoration-line-through fs-6">
                        ‚Çπ{{ resort.price_per_night }}
                    </span>
                    <span class="fs-3 fw-bold text-success ms-2">
                        ‚Çπ{{ resort.discounted_price }}
                    </span>
                    <span class="badge bg-warning text-dark ms-2">
                        {{ discount }}% OFF
                    </span>
                </div>

                <p class="fw-semibold">
                    üè® Available Rooms:
                    <span class="text-success">{{ resort.total_rooms }}</span>
                </p>

                <!-- Rating -->
                <div class="mb-3">
                    {% if avg_rating %}
                        <span class="badge bg-warning text-dark fs-6">
                            ‚≠ê {{ avg_rating|floatformat:1 }} / 5
                        </span>
                    {% else %}
                        <span class="text-muted">No ratings yet</span>
                    {% endif %}
                </div>

                <hr>

                <!-- Reviews -->
                <h5 class="fw-bold mb-3">Guest Reviews</h5>

                {% if user.is_authenticated %}
                    {% if has_paid_booking and not has_reviewed %}
                        <a href="{% url 'add_review' resort.id %}"
                           class="btn btn-outline-success mb-3 w-100">
                            ‚úçÔ∏è Write Review
                        </a>
                    {% endif %}
                {% endif %}

                <!-- Booking Button -->
                {% if user.is_authenticated %}
                    <a href="{% url 'create_booking' resort.id %}"
                       class="btn btn-success btn-lg w-100 shadow-sm booking-btn">
                        Book Now
                    </a>
                {% else %}
                    <a href="{% url 'login' %}"
                       class="btn btn-warning btn-lg w-100 shadow-sm">
                        Login to Book
                    </a>
                {% endif %}

            </div>
        </div>
    </div>

</div>
{% endblock %}
