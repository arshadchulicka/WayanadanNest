{% extends 'base.html' %}

{% block content %}
{% load static %}

<div id="homeCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">
  <div class="carousel-inner">
<!-- Indicators -->
  <div class="carousel-indicators">
    {% for slide in carousel_images %}
      <button type="button"
              data-bs-target="#homeCarousel"
              data-bs-slide-to="{{ forloop.counter0 }}"
              class="{% if forloop.first %}active{% endif %}">
      </button>
    {% endfor %}
  </div>



    {% for slide in carousel_images %}

    <div class="carousel-item {% if forloop.first %}active{% endif %}">
      <img src="{{ slide.image.url }}" class="d-block w-100 carousel-img">

      <div class="carousel-caption d-none d-md-block">
        <h2>{{ slide.title }}</h2>
        <p>{{ slide.subtitle }}</p>

        <span class="badge bg-danger fs-6 mb-3">
          {{ slide.discount_percentage }}% OFF
        </span>

        <br>
        <a href="{{ slide.button_link }}" class="btn btn-warning btn-lg mt-2">
          {{ slide.button_text }}
        </a>
      </div>
    </div>
    <button class="carousel-control-prev" type="button"
        data-bs-target="#homeCarousel" data-bs-slide="prev">
  <span class="carousel-control-prev-icon"></span>
</button>
    <button class="carousel-control-next" type="button"
        data-bs-target="#homeCarousel" data-bs-slide="next">
  <span class="carousel-control-next-icon"></span>
</button>
    {% endfor %}

  </div>
</div>
<div class="container mt-5">

    <!-- Page Header -->
    <div class="text-center mb-5">
        <h2 class="fw-bold">üå¥ Explore Our Resorts</h2>
        <p class="text-muted">Luxury stays surrounded by nature</p>
    </div>

    <div class="row g-4">
        {% for resort in resorts %}
        <div class="col-lg-4 col-md-6">

            <div class="card resort-card h-100 border-0">

                <!-- Image -->
                <div class="position-relative">
                    <img src="{{ resort.image.url }}"
                         class="card-img-top resort-img">

                    <span class="discount-badge">
                        {{ discount }}% OFF
                    </span>
                </div>

                <!-- Card Body -->
                <div class="card-body d-flex flex-column">

                    <h5 class="fw-bold">{{ resort.name }}</h5>
                    <p class="text-muted small mb-2">
                        <i class="fa-solid fa-location-dot me-1"></i>
                        {{ resort.location }}
                    </p>

                    <p class="resort-desc">
                        {{ resort.description|truncatechars:90 }}
                    </p>

                    <!-- Price -->
                    <div class="price-box my-2">
                        <del class="text-danger small">
                            ‚Çπ{{ resort.price_per_night }}
                        </del>
                        <span class="fs-5 fw-bold text-success ms-2">
                            ‚Çπ{{ resort.discounted_price }}
                        </span>
                        <span class="small text-muted">/ night</span>
                    </div>

                    <!-- Rating -->
                     <!-- Rating -->
                    <div class="mb-3">
                        {% if resort.avg_rating %}
                            <span class="rating">
                                ‚≠ê {{ resort.avg_rating|floatformat:1 }}/5
                            </span>
                        {% else %}
                            <span class="text-muted small">No ratings yet</span>
                        {% endif %}
                    </div>


                    <!-- Button -->
                    <a href="{% url 'resort_detail' resort.id %}"
                       class="btn btn-success mt-auto w-100">
                        View Details
                    </a>

                </div>
            </div>

        </div>
        {% endfor %}
    </div>
</div>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
